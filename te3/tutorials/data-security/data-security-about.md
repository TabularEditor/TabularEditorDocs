---
uid: data-security-about
title: What is Data Security?
author: Kurt Buhler
updated: 2023-03-02
applies_to:
  editions:
    - edition: Desktop
      none: x
    - edition: Business
    - edition: Enterprise
---
# What is Data Security?

<br></br>

![Data Security Visual Abstract](~/images/data-security/data-security-visual-abstract.png)

<br></br>

Published datasets can be configured with [Data Security]() using <span style="color:#01a99d">[Row-Level Security (RLS)](https://learn.microsoft.com/en-us/power-bi/enterprise/service-admin-rls)</span> (for Tables) or <span style="color:#8d7bae">[Object-Level Security (OLS)](https://learn.microsoft.com/en-us/power-bi/enterprise/service-admin-ols?tabs=table)</span> (for Tables & Columns). __The purpose of Data Security is to ensure users only see and use data they are permitted to, both in published reports and when making their own, self-service data solutions.__ To do this, users are assigned to __Roles__ which have <span style="color:#01a99d">RLS</span> or <span style="color:#8d7bae">OLS</span> rules configured, which <span style="color:#01a99d">filter (RLS)</span> or <span style="color:#8d7bae">restrict (OLS)</span> queries generated by reports & client tools like Power BI Desktop or Excel. While not obligatory, Data Security is a common feature of a robust, secure & compliant enterprise BI solution. This series of articles is a functional introduction to Data Security as it pertains to Tabular Models & Tabular Editor.

_Both RLS & OLS can be easily configured, modified and tested from within Tabular Editor._

---

1. __About Data Security and RLS/OLS (This Article):__ Overview of <span style="color:#01a99d">RLS</span> & <span style="color:#8d7bae">OLS</span>, what they do, where their properties are found in the model, and how they work. 
2. __Considerations & Best Practices of RLS/OLS:__ Key ingredients to get Data Security working successfully in your model, and some common limitations / considerations of <span style="color:#01a99d">RLS</span> & <span style="color:#8d7bae">OLS</span> implementation both separately and together. 
3. __Modify an Existing RLS Configuration:__ How to find and change an existing <span style="color:#01a99d">Row-Level Security</span> configuration in a deployed dataset.
4. __Set-up a new RLS Configuration:__ A step-by-step tutorial explaining how to set-up <span style="color:#01a99d">Row-Level Security</span> 'from scratch' in a dataset. 
5. __Modify/Set-up an OLS Configuration:__ How to change or configure for the first time <span style="color:#8d7bae">Object-Level Security</span> in a dataset.
6. __Testing RLS/OLS with Impersonation:__ How to test Data Security is working & configured correctly in your dataset using Tabular Editor's data querying features.

---

<div class="NOTE">
  <h5>WHY CONFIGURE ROW- OR OBJECT-LEVEL SECURITY?</h5>
  Configuring RLS or OLS can be benificial for your model & BI solution:  
  <li> Reduce risk and improve governance by ensuring users only see data they should.
  <li> Configure dynamic RLS with central role tables for consistency and lightweight maintenance.
  <li> Have granular control on what rows and objects different users can query.
</div>

> [!WARNING]
> RLS and OLS cannot intersect over the same objects. A table or column affected by both an OLS permission and RLS table permission will produce an error for users attempting to access the dataset. Combining RLS and OLS has specific use-cases and requires careful model design. For more information, see the second article about [Considerations & Best Practices](data-security-considerations.md).
<br></br>

---

### How does it work?
Data Security works at the level of the model. It is configured following the below steps:


1. __Creating Roles:__ _Roles_ are groups of users who have the same permission / data security logic. _Users_ in this case are identified by their email, or the email of an [Azure AD Security Group](https://learn.microsoft.com/en-us/power-bi/guidance/powerbi-implementation-planning-security-tenant-level-planning#integration-with-azure-ad). Examples of roles:
    - Users in the same region, team or department (_EMEA_, _UA Sales Team_).
    - Users with the same role, function or access clearance (_Key Account Managers_, _SC Clearance_).
    - Groups defined by other business logic or arbitrary rules (_Externals_, _Build Users_). 

> [!NOTE]
> It is [recommended][https://learn.microsoft.com/en-us/power-bi/guidance/powerbi-implementation-planning-security-tenant-level-planning#strategy-for-using-groups] to manage Data Security and Access Management using [Azure Active Directory Groups](https://learn.microsoft.com/en-us/azure/active-directory/fundamentals/how-to-manage-groups). 
> <br>With this approach, you centralize management of security & user segmentation.

2. __Specifying Rules:__ _Rules_ are applied for each role to one or more objects, depending on the security type:
    - _<span style="color:#01a99d">RLS Table Permissions:</span>_ DAX table expressions that iterate over a table, returning each row evaluating `True`. These permissions traverse relationships; the design of the model is imperative to good RLS rules.
    - _<span style="color:#8d7bae">OLS Object Permissions:</span>_ Either `Read` (can see / query), `None` (cannot see / query) or `Default` (equivalent to `Read`). These permissions apply to the primary objects as well as all downstream dependents. 


3. __Assigning Roles:__ Once configured in the dataset, users must be added to their respective roles.
    - _Power BI:_ Roles are assigned via the Power BI service, [in the dataset settings from the Workspace](https://learn.microsoft.com/en-us/power-bi/enterprise/service-admin-rls#manage-security-on-your-model).
    - _SSAS / AAS:_ Roles are assigned via the Role object
    - _Power BI Embedded:_ You must [generate an embed token](https://learn.microsoft.com/en-us/power-bi/developer/embedded/cloud-rls#generate-an-embed-token).


4. __Managing Access:__ Users must be given access to the dataset according to the appropriate [usage scenario](https://learn.microsoft.com/en-us/power-bi/guidance/powerbi-implementation-planning-usage-scenario-overview).
    - _App Audience:_ Users / their Azure AD Groups are added to the appropriate [App Audience](https://data-goblins.com/power-bi/app-audiences).
    - _Workspace Viewer:_ Users / their Azure AD Groups are added as [Workspace Viewers](https://learn.microsoft.com/en-us/power-bi/guidance/powerbi-implementation-planning-workspaces-workspace-level-planning#workspace-access)
    - _Dataset Readers:_ Users / their Azure AD Groups are given [Dataset-specific permissions](https://learn.microsoft.com/en-us/power-bi/connect-data/service-datasets-manage-access-permissions) via a Dataset or dependent item (i.e. Report).


> [!WARNING]
> Users given [Admin, Member or Contributor Workspace Roles](https://learn.microsoft.com/en-us/power-bi/collaborate-share/service-roles-new-workspaces#workspace-roles) have __*write permissions*__ to a dataset. As such, Data Security like RLS and OLS will not filter or block data for users with these roles.
> <br><br>
> __*If a user is an Admin, Member or Contributor, they will be able to see all the data*__. 
> <br><br>
> As much as is reasonable, try to distribute and manage permissions via Power BI Apps.
> For more information, see the article about [Considerations & Best Practices](data-security-considerations.md).


5. __Validating Security:__ RLS and OLS can only be tested with impersonation once user groups have been added & granted access. Validate security via:
    - _Tabular Editor:_ Using [User Impersonation](data-security-testing.md).
    - _Power BI Service:_ In the [Dataset Security settings](https://learn.microsoft.com/en-us/power-bi/enterprise/service-admin-rls#validating-the-role-within-the-power-bi-service).

---

### How Does it Look?
Depending on how you've configured your Data Security, it will look different:

# [None](#tab/nodatasecurity)
__Without security, everyone with access to the dataset can see all the data.__
The only restriction is whether they have access to the reports / datasets.

# [Static RLS](#tab/staticrls)
__With RLS configured, data is filtered to only rows the user are allowed to see.__
This is done according to the _Table Permissions_ configured in the model for that Table & Role.

These Table Permissions are DAX Table Expressions configured for a specific model table.
Rows that evaluate `True` are returned; rows that return `False` are filtered out due to RLS.

The most simple Table Permissions are _Static_:

```dax
// Table Permission for 'Regions' table and 'CTG' role
'Regions'[Territory] = "Central Transit Gate"
```

The above table permission will evaluate `True` for all rows where 'Regions'[Territory] = "Central Transit Gate".
Any users assigned to the 'CGT' role will only see records related to the "Central Transit Gate" Territory from this table.

Static RLS configurations are rare because they usually do not fit most business requirements.


# [Dynamic RLS](#tab/dynamicrls)
__With RLS configured, data is filtered to only rows the user are allowed to see.__
This is done according to the _Table Permissions_ configured in the model for that Table & Role.

These Table Permissions are DAX Table Expressions configured for a specific model table.
Rows that evaluate `True` are returned; rows that return `False` are filtered out due to RLS.

__*Dynamic* RLS relies on the `USERPRINCIPALNAME()` or `USERNAME()` functions to compare them to a security table.__
The security table will then return logic that applies the table filter to that or another table in the model.

This is referred to as _Dynamic_ RLS as the result will change depending on the user; the `USERPRINCIPALNAME()`.
Below is an example of a Dynamic RLS Table permission:

```dax
// Table Permission for 'Regions' table and 'Territory Directors' role.

// Get Current User
VAR _CurrentUser = 
SELECTCOLUMNS (
	FILTER ( 
		'Employees',
		'Employees'[Employee Email] = USERPRINCIPALNAME ()
	), 
	"@Name", 'Employees'[Employee Name]
)
RETURN 
'Regions'[Territory Directors] IN _CurrentUser
```

The above table permission gets the Employee Name alias from the 'Employees' table, which is applied without a relationship to the 'Regions' table. 
The result for any user added to this role is that they will only see data where:
1. Their e-mail is in the 'Employees'[Employee Email] column
2. Their alias in 'Employees'[Employee Name] matches one in 'Regions'[Territory Directors]

Dynamic RLS is the most common way to secure an Enterprise Dataset.

# [OLS](#tab/ols)
__With OLS configured as `None`, queries are prevented from being evaluated; they return an error.__ If the OLS permission is set to `Read`, there is no effect.
This is done according to the OLS Permission Level of the Column or Table, and affects all downstream dependents. 

In the example, the column 'Invoices'[Net Invoice Cost] has an OLS Permission of `None` for the role 'Sales'. 
The reason is because of the below requirement:

`'Sales' users are allowed to see Sales data, but not Cost or Margin data.`

This means that a user belonging to the 'Sales' role will not be able to see: 

1. Any query or visual referring directly to the 'Invoices'[Net Invoice Cost] column
2. Any DAX measure or calculation item referring directly to the 'Invoices'[Net Invoice Cost] column
3. Any DAX measure or calculation item referring _indirectly_ (downstream) to the 'Invoices'[Net Invoice Cost] column.
4. Any object that has a column with a relationship with 'Invoices'[Net Invoice Cost] 

The result of 1-4 will be an error in query evaluation. A Power BI visual will return a _grey box of death_. 

> [!WARNING]
> __Business users will often perceive expected OLS results as being a 'broken' report, visual, or query. __
> <br>If using OLS and users are expected to confront these evaluations, try the following:<br>
> 1. Educate users about the security.
> 2. Try to handle the error and return a more meaningful message.
> 3. In Build scenarios, consider hiding the object. 
> 4. A further optimization to be tested is setting `IsPrivate` to `True` or `IsAvailableInMDX` to `False`. 

# [RLS & OLS](#tab/rlsols)
With both RLS & OLS configured, there are two possible outcomes:

1. __RLS & OLS Intersect, Somehow:__ The security will not work and the dataset will return an error for all queries and all users.
2. __RLS & OLS Are Exclusive:__ The security will work as expected. RLS will filter the tables with configured Table Permissions, while OLS will prevent query evaluations for objects and dependents that have `None` Permissions. 

Because of #1, if you expect to use both RLS & OLS, this must be carefully considered during model design.

An example of #2 is below: 

- __OLS:__ Permission for 'Employees' table is set to `None`
- __RLS:__ Table Permission for 'Regions' is configured as below:

```dax
// Get Current User
VAR _CurrentUser = 
SELECTCOLUMNS (
	FILTER ( 
		'Employees',
		'Employees'[Employee Email] = USERPRINCIPALNAME ()
	), 
	"@Name", 'Employees'[Employee Name]
)
RETURN 
'Regions'[Territory Directors] IN _CurrentUser
```

Note that while technically the RLS Table Permission is a dependent of the 'Employees' table, it is not affected by the OLS; there is no intersection between the RLS & OLS and this Data Security setup works as expected. Users in the 'Territory Directors' role:

- Will only see data for Territories they belong to.
- Will not be able to query the 'Employees' table to see the PII of their colleagues.

> [!WARNING]
> Scenarios combining RLS & OLS are not rare.
> <br>Scenarios using them correctly are. 
> <br>Ensure that if you have a requirement for RLS & OLS together, it is considered in the model design.

# [User Not Added to Role](#tab/role)
If a Data Security Role exists in the dataset, no user will be able to read any data until they are added to the role. 
Users will receive an error like the below:
TODO: Add reference

> [!NOTE]
> Don't forget to give users access to the dataset AND add them to the security role.

# [User Not Given Access](#tab/access)
If a user is added to a security role, this will not automatically grant them read access to the dataset. They will still not be able to access any dataset or reports. 
Users will receive an error like the below:
TODO: Add reference

> [!NOTE]
> Don't forget to give users access to the dataset AND add them to the security role.
